<mvc:View controllerName="progferieDIP.controller.View2" xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m" xmlns:f="sap.f" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core">
    <f:DynamicPage id="dynamicPageId" headerExpanded="{/headerExpanded}" toggleHeaderOnTitleClick="{/titleClickable}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="Gestione Ferie e Permessi" />
                </f:heading>
                <f:content>
                    <OverflowToolbar />
                </f:content>
                <f:actions>
                    <Button text="Visualizza tutto" type="Emphasized" icon="sap-icon://show" press="onAjaxSearch" />
                    <Button text="Approvate/Rifiutate" id="approved" type="Emphasized" icon="sap-icon://show" press="onFilter" />
                    <Button text="Da approvare" id="notApproved" type="Critical" press="onFilter" />
                </f:actions>
                <f:navigationActions />
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true" />
        </f:header>
        <f:content>
            <Table noDataText="" id="tabella" sticky="HeaderToolbar,ColumnHeaders" inset="false" width="auto" items="{Prenotazioni>/}">
                <headerToolbar>
                    <Toolbar height="60px">
                        <l:VerticalLayout>
                            <Title text="Inserimento" level="H2" class="sapUiMediumMarginTop" />
                        </l:VerticalLayout>
                    </Toolbar>
                </headerToolbar>
                <columns>
                    <Column width="20em">
                        <Panel id="datePanel">
                            <Label text="Data inizio" labelFor="DTP2" />
                            <DateTimePicker id="dataI" placeholder="Inserisci..." showCurrentDateButton="true" showCurrentTimeButton="true" value="" valueFormat="yyyy-MM-ddTHH:mm:ss" change="handleChange" class="sapUiSmallMarginBottom" />
                        </Panel>
                    </Column>
                    <Column width="20em">
                        <Panel id="datePanel2">
                            <Label text="Data fine" labelFor="DTP3" />
                            <DateTimePicker id="dataF" placeholder="Inserisci..." showCurrentDateButton="true" showCurrentTimeButton="true" value="" valueFormat="yyyy-MM-ddTHH:mm:ss" change="handleChange" class="sapUiSmallMarginBottom" />
                        </Panel>
                    </Column>
                    <Column>
                        <l:HorizontalLayout class="sapUiResponsiveMargin">
                            <Button type="Success" press="onConfirm" width="4em" icon="sap-icon://save" class="sapUiSmallMarginEnd" />
                        </l:HorizontalLayout>
                    </Column>
                    <Column hAlign="Begin" />
                    <Column />
                    <Column />
                </columns>
                <items>
                    <ColumnListItem vAlign="Middle">
                        <cells>
                            <l:VerticalLayout>
                                <Text text="Data Prenotazione" />
                                <Text text="{Prenotazioni>dataPrenotazione}" />
                            </l:VerticalLayout>
                            <l:VerticalLayout>
                                <Text text="Data Inizio" />
                                <Input value="{Prenotazioni>dataInizio}" enabled="{= ${Prenotazioni>isRejected}===false &amp;&amp; ${Prenotazioni>isApproved}===false}" />
                            </l:VerticalLayout>
                            <l:VerticalLayout>
                                <Text text="Data Fine" />
                                <Input value="{Prenotazioni>dataFine}" enabled="{= ${Prenotazioni>isRejected}===false &amp;&amp; ${Prenotazioni>isApproved}===false}" />
                            </l:VerticalLayout>
                            <l:VerticalLayout>
                                <Text text="Richiedente" />
                                <Text text="{Prenotazioni>createdBy}" />
                            </l:VerticalLayout>
                            <l:VerticalLayout>
                                <Text text="Stato Richiesta" />
                                <l:HorizontalLayout>
                                    <core:Icon
                                        src="{parts: [{path: 'Prenotazioni>isApproved'}, {path: 'Prenotazioni>isRejected'}], formatter: '.formatter.formatIcon'}"
                                        id="approvato"
                                        class="size1"
                                        color="{parts: [{path: 'Prenotazioni>isApproved'}, {path: 'Prenotazioni>isRejected'}], formatter: '.formatter.formatIconColor'}"
                                    />
                                </l:HorizontalLayout>
                            </l:VerticalLayout>
                            <HBox>
                                <Button type="Emphasized" press="onUpdate" width="4em" icon="sap-icon://edit" class="sapUiSmallMarginEnd" visible="{= ${Prenotazioni>isRejected}===false &amp;&amp; ${Prenotazioni>isApproved}===false}" />
                                <Button type="Negative" press="onDelete" width="4em" icon="sap-icon://delete" class="sapUiSmallMarginEnd" visible="{= ${Prenotazioni>isRejected}===false &amp;&amp; ${Prenotazioni>isApproved}===false}" />
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </f:content>
    </f:DynamicPage>
</mvc:View>
